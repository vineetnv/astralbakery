{% extends "base.html" %}
{% block title %}Home - Astral Bakery{% endblock %}

{% block content %}
    <!-- 🔔 Flash messages -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div style="background-color: #d4edda; color: #155724; padding: 10px; border-radius: 5px; margin-bottom: 20px; text-align: center;">
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- 🖼️ Banner image -->
    <img src="{{ url_for('static', filename='images/itworked.jpg') }}" alt="Astral Bakery Banner" class="banner">

    <!-- 🧁 Section title -->
    <h2 class="section-title">Current Selections</h2>

    <!-- 🏆 Grid of current cookies -->
    <div class="grid">
        {% if current_cookies %}
            {% for c in current_cookies %}
                <div class="grid-item">
                    <img src="{{ url_for('static', filename=c.image) }}" alt="{{ c.name }}">
                    <p>{{ c.name }} - ${{ '%.2f'|format(c.price|float) }}</p>
                    <button class="add-to-cart-button"
                            data-id="{{ c.id }}"
                            data-name="{{ c.name }}"
                            data-price="{{ c.price|float }}">
                        Add to Cart
                    </button>
                </div>
            {% endfor %}
        {% else %}
            <p style="text-align:center;">No cookies are currently listed. Check back soon!</p>
        {% endif %}
    </div>

    <!-- 🍪 Past Flavors Section -->
    <h2 class="section-title" style="margin-top: 60px;">Past Flavors</h2>

    <div class="grid">
        {% if past_cookies %}
            {% for c in past_cookies %}
                <div class="grid-item" style="opacity:0.7;">
                    <img src="{{ url_for('static', filename=c.image) }}" alt="{{ c.name }}">
                    <p>{{ c.name }} - ${{ '%.2f'|format(c.price|float) }}</p>
                    <button class="add-to-cart-button"
                            data-id="{{ c.id }}"
                            data-name="{{ c.name }}"
                            data-price="{{ c.price|float }}">
                        Add to Cart
                    </button>
                </div>
            {% endfor %}
        {% else %}
            <p style="text-align:center;">No past flavors available right now!</p>
        {% endif %}
    </div>
{% endblock %}